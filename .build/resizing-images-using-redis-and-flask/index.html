<!doctype html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="Cameron Maske's blog">
	<meta name="viewport" content="width=device-width">

	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://cameronmake.com/feed.atom">
	<meta name="Description" content="The ramblings of a software engineer with a love for web design and typography">


	<link rel="shortcut icon" href="/static/img/favicon.ico">
	<link rel="stylesheet" href="/static/css/style.css">
	<script type="text/javascript" src="//use.typekit.net/yge1qyw.js"></script>

	<!-- Typekit -->
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<title>
		
    Resizing images using Flask and Redis.

		· Cameron Maske
	</title>

</head>
<body class="">
	
	<div class="navbar">
  		<div class="navbar-inner">
    		<a class="brand" href="/">
    			<i class="icon-home"></i>
    			Home
    		</a>
  		</div>
	</div>
	

	<div class="container">
		<div class="row">
			<div class="span8 offset2">
				
    <h1>
        Resizing images using Flask and Redis.
    </h1>
    <div class="subtitle center uppercase">
        <h2>
            <span class="serif">
                15 June 2013
            </span>
            ·
            <span class="sans-serif">
                WEB APPS
            </span>
        </h2>
    </div>
    <p class="intro">
        Recently I put together a mini-project that resizes images convenientally through Flask and caches the thumbnail images in Redis.
    </p>

    <p>The code is all on <a href="https://github.com/cameronmaske/puppy-eyes">github</a> and there is a <a href="http://puppy-eyes.herokuapp.com/">demo</a> here to try out! To resize an image, you pass the image's url as the url parameter "link" like so...</p>
<p><a href="http://puppy-eyes.herokuapp.com/?link=http://i.imgur.com/75Jr3.jpg">http://puppy-eyes.herokuapp.com/?link=http://i.imgur.com/75Jr3.jpg</a></p>
<p>And the server will return the resized <em>thumbnail</em> image!</p>
<h2>So how does it work?</h2>
<p>Using <a href="http://flask.pocoo.org/">flask</a> on the backend, a check is run to see if the resized image already exists in the <a href="http://redis.io/">redis server</a> (a very fast key-store) based on the image's url and sizing options passed in. If it does, great! The stored string in the redis is turned back into an image file and served back as the response.
If it does not exist, the image is downloaded, resized (by <a href="http://www.pythonware.com/products/pil/">PIL</a>), stored in redis as a string (essentially caching it if a repeat call it made) and then served back.</p>
<p>If for some reason you linked to something that isn't an image, it should just redirect through.</p>
<p>This mini-project came out of the frustration of images in emails. Getting images with varying heights and widths to appear the same size across popular email clients is a nightmare. Some support max-width, some support only width, some don't even support height (I'm looking at you <a href="http://www.campaignmonitor.com/css/">Outlook</a>).
While this wasn't the chosen solution in the end, I thinks it's a neat use case of how both the simplicity (and power) of redis and flask play nicely together!</p>
<p>Let me know if you have any questions in the comments!</p>

    <div class="bio outlined row">
        <div class="span2">
            <div id="me"></div>
        </div>
        <div class="span6">
            <h2>
                <span class="by">by</span>
                Cameron Maske
            </h2>
            <p>
                Software engineer with a love for web design and typography.  Want to get in touch?
                <span class="note">
                    Feel free to drop me an <a href="mailto:c@meronmaske.com"> email</a> or over <a href="http://www.twitter.com/cameronmaske/">twitter</a>
                </span>
            </p>

        </div>
    </div>
    <div class="comments" id="disqus_thread">
    </div>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by
        <span class="logo-disqus">Disqus</span>
    </a>

			</div>
		</div>
	</div>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>

	
    

    <!-- Cheeky little script to follow people around! -->
    <script type="text/javascript" src="/static/js/follow.js"></script>
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'cameronmaske';
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



	<!-- Google Analytics -->
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-25258948-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</body>
</html>